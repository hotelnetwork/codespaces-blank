{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
    <html>
        <head>
          <script>
            function myFunction() {
              var x = document.getElementById("myTopnav");
              if (x.className === "topnav") {
                x.className += " responsive";
              } else {
                x.className = "topnav";
              }
            }
          </script>
          <script>
            alert("Window width: " + window.innerWidth + ", height: " + window.innerHeight);
            // Record window window width and height to sqlite3 database using AJAX
            // Create the database and table if necessary.
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/create_window_size_table", true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send();
            // Record the window width and height.
            xhr.open("POST", "/record_window_size", true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(JSON.stringify({"width": window.innerWidth, "height": window.innerHeight}));
          </script>
            <style>
                body {
                    font-family: "Raleway", "Amatic SC", sans-serif;
                }
                .navbar {
                    margin-bottom: 0;
                    border-radius: 0;
                }
                .row.content {height: 1500px}
                .sidenav {
                    padding-top: 20px;
                    background-color: #f1f1f1;
                    height: 100%;
                }
                footer {
                    background-color: #555;
                    color: white;
                    padding: 15px;
                }
                @media screen and (max-width: 767px) {
                    .sidenav {
                        height: auto;
                        padding: 15px;
                    }
                    .row.content {height: auto;}
                }
                td, th {
                    text-align: center;
                }
                h1 {
                    /* text-align: center; */
                    text-align: left;
                    padding-left: 10%;
                }
            </style>
            <title>Stock Data</title>
        </head>
        <body>
            {% include 'menu.html' %}
            <h1 style="font-size: 16px;">Current Market Data: {{ symbol }}</h1>
            <h1 style="font-size: 16px;">Last Updated: {{ last_updated }}</h1>
            <table class="table table-striped" style="width:80%; margin: 0 auto;">
                <thead>
                    <tr>
                        {% for column in df.columns %}
                            <th>{{ column }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in df.iterrows() %}
                        <tr>
                            {# 2 decimal places in value #}
                            {% for value in row %}
                                <td>{{ value | round(4) }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </body>
    </html>
{% endblock %}
import requests
from bs4 import BeautifulSoup

# Fetch the webpage
response = requests.get('https://finance.yahoo.com/quote/TSLA')

# Parse the webpage with bs4
soup = BeautifulSoup(response.text, 'html.parser')

# Find the price on the page
price_tag = soup.find('span', {'class': 'Trsdu(0.3s) Fw(b) Fz(36px) Mb(-4px) D(ib)'})

# Print the price
if price_tag is not None:
    print(price_tag.text)
else:
    print("Could not find the price.")